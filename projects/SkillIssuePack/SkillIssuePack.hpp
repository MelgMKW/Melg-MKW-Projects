#ifndef _SKILLISSUEPACK_
#define _SKILLISSUEPACK_
#include <kamek.hpp>
#include <game/System/identifiers.hpp>
#include <game/UI/Ctrl/UIControl.hpp>
#include <File/Folder.hpp>

#define CUPCOUNT 38                    //46 MAX
#define TRACKCOUNT (CUPCOUNT * 4)      //184 max
#define TRACKBLOCKING 16




namespace SIP{
const char modFolder[18] = "/SIP";
const char ghostFolder[28] = "/SIP/Ghosts";

extern u32 winningCourse;
const char UIAssets[15] = "/SIPUI.szs";
const char CommonAssets[15] = "/SIPCommon.szs";
const char breff[25] = "/Effect/SIP.breff";
const char breft[26] = "/Effect/SIP.breft";
const char controlFolder[8] = "control";
const char buttonFolder[7] = "button";
const char bgFolder[3] = "bg";

enum TTMode{
        SIPTTMODE_150,
        SIPTTMODE_200,
        SIPTTMODE_150_FEATHER,
        SIPTTMODE_200_FEATHER,
};
extern TTMode ttMode;
extern const char *ttModeFolders[4];
extern u8 racesPerGP;

s32 Open(char *path, IOS::Mode mode);
int GetCRC32(CourseId id);
CourseId GetCourseId();
void ChangeImage(LayoutUIControl *control, const char *paneName, const char *tplName);
const u8 extSlotToTrackId[CUPCOUNT][4] = {
{MOO_MOO_MEADOWS, GBA_BOWSER_CASTLE_3, KOOPA_CAPE, N64_BOWSERS_CASTLE},
{SNES_MARIO_CIRCUIT_3, RAINBOW_ROAD, GBA_SHY_GUY_BEACH, MAPLE_TREEWAY},
{DS_PEACH_GARDENS, DS_DESERT_HILLS, GBA_BOWSER_CASTLE_3, RAINBOW_ROAD},
{MUSHROOM_GORGE, DK_SUMMIT, N64_BOWSERS_CASTLE, GBA_BOWSER_CASTLE_3},
{SNES_GHOST_VALLEY_2, BOWSERS_CASTLE, BOWSERS_CASTLE, RAINBOW_ROAD},
{GBA_BOWSER_CASTLE_3, SNES_MARIO_CIRCUIT_3, KOOPA_CAPE, MOONVIEW_HIGHWAY},
{GCN_WALUIGI_STADIUM, MUSHROOM_GORGE, MARIO_CIRCUIT, RAINBOW_ROAD},
{BOWSERS_CASTLE, MOO_MOO_MEADOWS, TOADS_FACTORY, TOADS_FACTORY},
{SNES_GHOST_VALLEY_2, MAPLE_TREEWAY, RAINBOW_ROAD, MUSHROOM_GORGE},
{COCONUT_MALL, MARIO_CIRCUIT, MUSHROOM_GORGE, GCN_PEACH_BEACH},
{COCONUT_MALL, DRY_DRY_RUINS, DS_PEACH_GARDENS, WARIOS_GOLD_MINE},
{N64_SHERBET_LAND, KOOPA_CAPE, MOO_MOO_MEADOWS, DK_SUMMIT},
{RAINBOW_ROAD, DAISY_CIRCUIT, SNES_GHOST_VALLEY_2, N64_BOWSERS_CASTLE},
{GCN_MARIO_CIRCUIT, GCN_DK_MOUNTAIN, BOWSERS_CASTLE, GRUMBLE_VOLCANO},
{SNES_GHOST_VALLEY_2, RAINBOW_ROAD, TOADS_FACTORY, GRUMBLE_VOLCANO},
{SNES_GHOST_VALLEY_2, N64_SHERBET_LAND, GBA_SHY_GUY_BEACH, RAINBOW_ROAD},
{SNES_MARIO_CIRCUIT_3, GCN_WALUIGI_STADIUM, MARIO_CIRCUIT, RAINBOW_ROAD},
{N64_MARIO_RACEWAY, N64_BOWSERS_CASTLE, GRUMBLE_VOLCANO, MUSHROOM_GORGE},
{GRUMBLE_VOLCANO, DAISY_CIRCUIT, MARIO_CIRCUIT, MARIO_CIRCUIT},
{GRUMBLE_VOLCANO, DAISY_CIRCUIT, MARIO_CIRCUIT, MARIO_CIRCUIT},
{MUSHROOM_GORGE, DRY_DRY_RUINS, RAINBOW_ROAD, GRUMBLE_VOLCANO},
{GCN_WALUIGI_STADIUM, MUSHROOM_GORGE, MUSHROOM_GORGE, MUSHROOM_GORGE},
{MOONVIEW_HIGHWAY, SNES_GHOST_VALLEY_2, RAINBOW_ROAD, RAINBOW_ROAD},
{MAPLE_TREEWAY, N64_BOWSERS_CASTLE, KOOPA_CAPE, RAINBOW_ROAD},
{MUSHROOM_GORGE, RAINBOW_ROAD, RAINBOW_ROAD, RAINBOW_ROAD},
{RAINBOW_ROAD, N64_DKS_JUNGLE_PARKWAY, COCONUT_MALL, N64_DKS_JUNGLE_PARKWAY},
{MUSHROOM_GORGE, DS_DELFINO_SQUARE, DS_YOSHI_FALLS, DRY_DRY_RUINS},
{BOWSERS_CASTLE, DS_YOSHI_FALLS, KOOPA_CAPE, KOOPA_CAPE},
{MARIO_CIRCUIT, RAINBOW_ROAD, SNES_GHOST_VALLEY_2, SNES_MARIO_CIRCUIT_3},
{N64_BOWSERS_CASTLE, DK_SUMMIT, DRY_DRY_RUINS, MAPLE_TREEWAY},
{DS_PEACH_GARDENS, SNES_MARIO_CIRCUIT_3, SNES_GHOST_VALLEY_2, RAINBOW_ROAD},
{RAINBOW_ROAD, MARIO_CIRCUIT, MAPLE_TREEWAY, SNES_GHOST_VALLEY_2},
{DS_YOSHI_FALLS, RAINBOW_ROAD, DS_DESERT_HILLS, DRY_DRY_RUINS},
{SNES_MARIO_CIRCUIT_3, RAINBOW_ROAD, MARIO_CIRCUIT, GCN_MARIO_CIRCUIT},
{GRUMBLE_VOLCANO, GBA_BOWSER_CASTLE_3, MAPLE_TREEWAY, TOADS_FACTORY},
{GRUMBLE_VOLCANO, GCN_DK_MOUNTAIN, GRUMBLE_VOLCANO, GRUMBLE_VOLCANO},
{MARIO_CIRCUIT, KOOPA_CAPE, WARIOS_GOLD_MINE, MARIO_CIRCUIT},
{MAPLE_TREEWAY, DK_SUMMIT, MARIO_CIRCUIT, GCN_DK_MOUNTAIN},
};

const u8 extSlotToMusicSlot[CUPCOUNT][4] = {
{MOO_MOO_MEADOWS, GBA_BOWSER_CASTLE_3, KOOPA_CAPE, N64_BOWSERS_CASTLE},
{LUIGI_CIRCUIT, RAINBOW_ROAD, GBA_SHY_GUY_BEACH, DS_DESERT_HILLS},
{DS_PEACH_GARDENS, DS_DESERT_HILLS, GBA_BOWSER_CASTLE_3, RAINBOW_ROAD},
{N64_MARIO_RACEWAY, DK_SUMMIT, N64_BOWSERS_CASTLE, GBA_BOWSER_CASTLE_3},
{SNES_GHOST_VALLEY_2, BOWSERS_CASTLE, BOWSERS_CASTLE, BOWSERS_CASTLE},
{GBA_BOWSER_CASTLE_3, GRUMBLE_VOLCANO, DS_TWILIGHT_HOUSE, MOONVIEW_HIGHWAY},
{GCN_WALUIGI_STADIUM, MUSHROOM_GORGE, SNES_MARIO_CIRCUIT_3, GBA_BOWSER_CASTLE_3},
{BOWSERS_CASTLE, MOO_MOO_MEADOWS, TOADS_FACTORY, TOADS_FACTORY},
{SNES_GHOST_VALLEY_2, MAPLE_TREEWAY, RAINBOW_ROAD, MUSHROOM_GORGE},
{COCONUT_MALL, MOONVIEW_HIGHWAY, MUSHROOM_GORGE, GCN_PEACH_BEACH},
{RAINBOW_ROAD, MOONVIEW_HIGHWAY, DS_PEACH_GARDENS, WARIOS_GOLD_MINE},
{N64_SHERBET_LAND, GCN_PEACH_BEACH, MOO_MOO_MEADOWS, N64_SHERBET_LAND},
{DS_TWILIGHT_HOUSE, BLOCK_PLAZA, SNES_GHOST_VALLEY_2, N64_BOWSERS_CASTLE},
{GCN_MARIO_CIRCUIT, GCN_DK_MOUNTAIN, N64_BOWSERS_CASTLE, GRUMBLE_VOLCANO},
{SNES_GHOST_VALLEY_2, GCN_DK_MOUNTAIN, GCN_DK_MOUNTAIN, GRUMBLE_VOLCANO},
{SNES_GHOST_VALLEY_2, N64_SHERBET_LAND, GBA_SHY_GUY_BEACH, RAINBOW_ROAD},
{SNES_MARIO_CIRCUIT_3, GCN_WALUIGI_STADIUM, MOONVIEW_HIGHWAY, DAISY_CIRCUIT},
{DS_DELFINO_SQUARE, N64_BOWSERS_CASTLE, GRUMBLE_VOLCANO, GCN_MARIO_CIRCUIT},
{GRUMBLE_VOLCANO, DAISY_CIRCUIT, N64_MARIO_RACEWAY, TOADS_FACTORY},
{GRUMBLE_VOLCANO, DAISY_CIRCUIT, MARIO_CIRCUIT, DRY_DRY_RUINS},
{MUSHROOM_GORGE, DRY_DRY_RUINS, DS_PEACH_GARDENS, DS_DESERT_HILLS},
{GCN_WALUIGI_STADIUM, MUSHROOM_GORGE, MUSHROOM_GORGE, MUSHROOM_GORGE},
{MOONVIEW_HIGHWAY, SNES_GHOST_VALLEY_2, RAINBOW_ROAD, RAINBOW_ROAD},
{MAPLE_TREEWAY, N64_BOWSERS_CASTLE, KOOPA_CAPE, DS_PEACH_GARDENS},
{MUSHROOM_GORGE, RAINBOW_ROAD, RAINBOW_ROAD, RAINBOW_ROAD},
{RAINBOW_ROAD, N64_DKS_JUNGLE_PARKWAY, COCONUT_MALL, GCN_DK_MOUNTAIN},
{GCN_PEACH_BEACH, MOONVIEW_HIGHWAY, DS_YOSHI_FALLS, DRY_DRY_RUINS},
{BOWSERS_CASTLE, DS_YOSHI_FALLS, GCN_WALUIGI_STADIUM, BOWSERS_CASTLE},
{DS_YOSHI_FALLS, RAINBOW_ROAD, SNES_GHOST_VALLEY_2, SNES_MARIO_CIRCUIT_3},
{N64_BOWSERS_CASTLE, DK_SUMMIT, DRY_DRY_RUINS, MAPLE_TREEWAY},
{DS_PEACH_GARDENS, SNES_BATTLE_COURSE_4, SNES_GHOST_VALLEY_2, RAINBOW_ROAD},
{RAINBOW_ROAD, MARIO_CIRCUIT, MAPLE_TREEWAY, SNES_GHOST_VALLEY_2},
{DS_YOSHI_FALLS, RAINBOW_ROAD, DS_DESERT_HILLS, DRY_DRY_RUINS},
{COCONUT_MALL, GRUMBLE_VOLCANO, WARIOS_GOLD_MINE, GCN_MARIO_CIRCUIT},
{GRUMBLE_VOLCANO, GBA_BOWSER_CASTLE_3, MAPLE_TREEWAY, TOADS_FACTORY},
{DS_TWILIGHT_HOUSE, GCN_DK_MOUNTAIN, GRUMBLE_VOLCANO, GRUMBLE_VOLCANO},
{MOONVIEW_HIGHWAY, KOOPA_CAPE, WARIOS_GOLD_MINE, RAINBOW_ROAD},
{SNES_GHOST_VALLEY_2, DK_SUMMIT, DAISY_CIRCUIT, N64_DKS_JUNGLE_PARKWAY},
};

const u32 CRC32Array[TRACKCOUNT] = {

    0xdcbf28b3, //0
    0xe810f9d6, //1
    0x91ff7bed, //2
    0xd5dea16d, //3
    0x346499db, //4
    0xa5f9ae4a, //5
    0xfa34f983, //6
    0xba3c895a, //7
    0xfbd899a2, //8
    0xd0727cf5, //9
    0x9ad60256, //10
    0xe7400c46, //11
    0x5d5c778e, //12
    0x4c47601d, //13
    0xda36a7b6, //14
    0xd7e0071e, //15
    0x5ac69e4a, //16
    0x41074b5c, //17
    0x6afc89fe, //18
    0x0cae6ba7, //19
    0xa6853d2f, //20
    0xab264ffd, //21
    0x06deaa72, //22
    0xdec56895, //23
    0xc40971ef, //24
    0xc640f728, //25
    0x79cf5842, //26
    0x008b28d9, //27
    0xf5f64ef1, //28
    0x0dd5b0f9, //29
    0x9f9579dd, //30
    0x82959900, //31
    0x55535ea7, //32
    0x7340c13f, //33
    0xe8f281ee, //34
    0xec584e30, //35
    0xa1ce415d, //36
    0x05a877b3, //37
    0x7982da89, //38
    0x7ac35828, //39
    0x9e75b266, //40
    0x6b943da2, //41
    0x28033c27, //42
    0xc8b51613, //43
    0x1db04b22, //44
    0xa336c216, //45
    0xa3523190, //46
    0x5cd25af8, //47
    0x94bda72a, //48
    0x59787ee1, //49
    0x12dbe70c, //50
    0xdab777f5, //51
    0x7b04885b, //52
    0xabc0c676, //53
    0xc1fc33d6, //54
    0x83426571, //55
    0x8af0deb5, //56
    0x78fedf74, //57
    0x0426c8fc, //58
    0x2ad138e4, //59
    0xa4a74bc1, //60
    0xe78ab1ce, //61
    0xf12261d5, //62
    0xc1e6066f, //63
    0x545e3b92, //64
    0xe35faf05, //65
    0x0e563e11, //66
    0x3e62e8ee, //67
    0x0f3de403, //68
    0x6098eb28, //69
    0xf1fc00b7, //70
    0xba0db1d8, //71
    0x4d034939, //72
    0xfa4f7971, //73
    0xce67932c, //74
    0xe18ad909, //75
    0x68c4153b, //76
    0x3673d8d8, //77
    0xafa7c7c3, //78
    0x3a1b167c, //79
    0xef21fe71, //80
    0xf178904f, //81
    0x62f12716, //82
    0x51c4d340, //83
    0x94b3ed78, //84
    0x4cddbbb4, //85
    0xfb279357, //86
    0xf69f18cb, //87
    0x695e7785, //88
    0x6134bbc1, //89
    0xb874629b, //90
    0x912561e6, //91
    0xc6931a04, //92
    0x69181972, //93
    0x21bc867a, //94
    0x1cc890fc, //95
    0xa9b0eb9c, //96
    0x2d071782, //97
    0x3508740f, //98
    0x20b1e27c, //99
    0x01607e15, //100
    0xb724420b, //101
    0xe5b528ab, //102
    0x42ac85b4, //103
    0x0d0abc8b, //104
    0xb406d5da, //105
    0x13c0b679, //106
    0x4cfcced6, //107
    0x58083e77, //108
    0xfa23ad56, //109
    0x6d9e2a24, //110
    0x9367e7c8, //111
    0x85bd6154, //112
    0x1e61f547, //113
    0x130a41e1, //114
    0x2596fcc1, //115
    0x5cc847bc, //116
    0xcf1cc54c, //117
    0xc6bdd561, //118
    0x4bbd63c4, //119
    0xd97b4574, //120
    0x1355aafd, //121
    0xba7cf948, //122
    0xe8920fdb, //123
    0x52c91207, //124
    0xd3d50019, //125
    0xbe2f8cd2, //126
    0xa7dda9f9, //127
    0x3cba4831, //128
    0xabcef1ae, //129
    0xd7dbc690, //130
    0x32788597, //131
    0x05f523ac, //132
    0x25be3a6f, //133
    0xb29c3e6f, //134
    0x51222b85, //135
    0x000e2e04, //136
    0xa44d8156, //137
    0x86aff9b6, //138
    0x3ff269a0, //139
    0xe6d64ca1, //140
    0xdc38fa68, //141
    0xcd59b9bc, //142
    0x3761dce4, //143
    0xfb8e66c9, //144
    0x0edb49cd, //145
    0x9a9fe415, //146
    0xba9fe721, //147
    0x3c3ddf01, //148
    0x086b8400, //149
    0x9a11f720, //150
    0xc439a7fe, //151

};
}//namespace SIP
#endif